<?php
// $Id$

/**
 * Implementation of hook_perm().
 */
//onModuleCreationWizard
function importexcel_perm() {
    return array(
        'access importexcel content',
		'access laporan importexcel'
	);
}

/**
 * Implementation of hook_menu().
 */

function importexcel_menu() {


	
    $items['importexcel'] = array (
      'title' => 'Import Data Pendapatan',
      'page callback' => 'drupal_get_form',
      'page arguments' => array('importexcel_import_form'),
      //'access arguments' => array ('desa penghapusan'),
	  'access arguments' => array ('access content'),
      'file' => 'importexcel_import_form.php',
      'type' => MENU_CALLBACK,
    );	

    return $items;
}


function importexcel_title_callback() {
    return t('Import Data Pendapatan');
}

 
function importexcel_cron() {

}


function importexcel_block_info() {
  // Many options are defined in hook_block_info():
  $blocks['chart_buku_besar'] = array(
    // info: The name of the block.
    'info' => t('Chart Buku Besar'),
    // Block caching options (per role, per user, etc.)
    // DRUPAL_CACHE_PER_ROLE is the default.
    'cache' => DRUPAL_CACHE_PER_ROLE,
  );

  /*
  // This sample shows how to provide default settings. In this case we'll
  // enable the block in the first sidebar and make it visible only on
  // 'node/*' pages. See the hook_block_info() documentation for these.
  $blocks['example_empty'] = array(
    'info' => t('Example: empty block'),
    'status' => TRUE,
    'region' => 'sidebar_first',
    'visibility' => BLOCK_VISIBILITY_LISTED,
    'pages' => 'node/*',
  );
  */

  return $blocks;
}

function importexcel_block_view($delta = '') {
  // The $delta parameter tells us which block is being requested.
  switch ($delta) {
    case 'chart_buku_besar':
      // The subject is displayed at the top of the block. Note that it
      // should be passed through t() for translation. The title configured
      // for the block using Drupal UI supercedes this one.
      $block['subject'] = t('Chart Buku Besar');
      // The content of the block is typically generated by calling a custom
      // function.
      $block['content'] = block_importexcel_contents($delta);
      break;

    case 'example_empty':
      $block['subject'] = t('Title of second block (example_empty)');
      $block['content'] = block_importexcel_contents($delta);
      break;

  }
  return $block;
}

function block_importexcel_contents($which_block) {
  switch ($which_block) {
    case 'chart_buku_besar':
      // Modules would typically perform some database queries to fetch the
      // content for their blocks. Here, we'll just use the variable set in the
      // block configuration or, if none has set, a default value.
      // Block content can be returned in two formats: renderable arrays
      // (as here) are preferred though a simple string will work as well.
      // Block content created through the UI defaults to a string.
      $result = array(
        '#markup' => draw_chart_buku_besar(),
      );
      return $result;

    case 'example_empty':
      // It is possible that a block not have any content, since it is
      // probably dynamically constructed. In this case, Drupal will not display
      // the block at all. This block will not be displayed.
      return;
  }
} 

 

